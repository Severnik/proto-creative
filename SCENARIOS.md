# VAS Package Multi-Apply Flow — Сценарии прототипа

## Обзор

Прототип демонстрирует флоу управления VAS-пакетами и массового применения промо-услуг к объявлениям.

**URL:** https://severnik.github.io/proto-creative/

---

## Экраны прототипа

| Экран | ID | Описание |
|-------|-----|----------|
| Мои объявления | `screen-my-listings` | Главный экран со списком объявлений |
| Выбор промоции | `screen-select-promotion` | Выбор типа продвижения |
| Применение пакета | `screen-package-apply` | Выбор объявлений для пакета |
| Оплата из кошелька | `screen-wallet-apply` | Выбор объявлений для платной промоции |
| Успех | `screen-success` | Результат применения промоции |

---

## Сценарий 1: Быстрое продвижение из рекомендаций

**Цель:** Пользователь быстро применяет промоцию к рекомендованному объявлению.

### Шаги:

1. **Главный экран** → Видит секцию "Рекомендуем продвинуть"
2. **Тап на карточку рекомендации** → Открывается Bottom Sheet с вариантами
3. **Если есть подходящий пакет:**
   - Показывается опция "Использовать пакет" (бесплатно)
   - Тап "Применить из пакета" → Промоция применена
4. **Если нет пакета:**
   - Показывается опция "Оплатить из кошелька"
   - Выбор типа (VIP/TOP/Update)
   - Тап "Оплатить €X.XX" → Промоция применена
5. **Snackbar** показывает результат

### Ожидаемый результат:
- Объявление получает бейдж VIP/TOP
- Счётчик пакета обновляется (если из пакета)
- Карточка исчезает из рекомендаций

---

## Сценарий 2: Массовое применение пакета

**Цель:** Пользователь применяет VAS-пакет к нескольким объявлениям сразу.

### Шаги:

1. **Главный экран** → Тап на карточку пакета в секции "Package offer"
2. **Экран применения пакета** → Видит:
   - Заголовок с названием пакета
   - Прогресс-бар использования (0/5)
   - Список подходящих объявлений
3. **Выбор объявлений:**
   - Тап на чекбоксы отдельных объявлений
   - Или "Select all" для выбора всех
4. **Прогресс-бар** обновляется при выборе
5. **Тап "Apply VIP to N ads"** → Модальное окно подтверждения
6. **Подтверждение** → Применение → Snackbar успеха

### Ограничения:
- Нельзя выбрать больше, чем осталось в пакете
- Только объявления со статусом "active"
- Только объявления из категории пакета

### Ожидаемый результат:
- Выбранные объявления получают промоцию
- Счётчик пакета обновляется

---

## Сценарий 3: Использование Quick Scenarios

**Цель:** Пользователь применяет готовый сценарий продвижения.

### Доступные сценарии:

| Сценарий | Описание | Автовыбор |
|----------|----------|-----------|
| Fast sale | VIP для топ-3 по просмотрам | Без VIP, сортировка по views |
| Premium showcase | TOP для авто > €50k | Motors, price > 50000, без TOP |
| Refresh old | Update для старых | Старше 7 дней |

### Шаги:

1. **Главный экран** → Тап на синюю кнопку (↑) в toolbar
2. **Экран выбора промоции** → Секция "Quick scenarios"
3. **Тап на сценарий** → Автоматический выбор объявлений
4. **Переход на экран применения** с предвыбранными объявлениями
5. **Toast** показывает сколько выбрано
6. **Подтверждение и применение**

### Ожидаемый результат:
- Объявления автоматически выбраны по критериям
- Пользователь может изменить выбор перед применением

---

## Сценарий 4: Оплата из кошелька

**Цель:** Пользователь покупает промоцию за деньги из кошелька.

### Шаги:

1. **Экран выбора промоции** → Секция "Payable from your wallet"
2. **Выбор типа:** VIP (€2.50) / TOP (€1.50) / Update (€0.50)
3. **Экран оплаты** → Видит:
   - Баланс кошелька: €25.00
   - Стоимость за объявление
   - Итоговую сумму
4. **Выбор объявлений** → Сумма обновляется
5. **Тап "Apply VIP to N ads · €X.XX"**
6. **Подтверждение** → Оплата → Snackbar успеха

### Ограничения:
- Итоговая сумма ≤ баланса кошелька
- При недостатке средств — предупреждение

### Ожидаемый результат:
- Промоция применена
- Баланс кошелька уменьшен

---

## Сценарий 5: Фильтрация объявлений

**Цель:** Пользователь находит нужные объявления через фильтры.

### Доступные фильтры:

| Фильтр | Расположение | Опции |
|--------|--------------|-------|
| Категория | Главный dropdown | All / Motors / Property / Electronics |
| Статус | Inline dropdown | Все / Опубликованные / Неоплаченные / На проверке / Скрытые / Отклонённые / На удаление |
| Промоция | Inline dropdown | All / VIP / TOP / No promotion |
| Расширенные | Экран фильтров | Ключевые слова, Локация, Телефон, Цена |

### Шаги:

1. **Тап на dropdown** → Выбор значения
2. **Список обновляется** мгновенно
3. **Для расширенных фильтров:**
   - Тап на иконку фильтров (☰) в toolbar
   - Заполнение полей
   - Тап "Apply"

### Ожидаемый результат:
- Список показывает только подходящие объявления
- Счётчики в dropdown статусов обновляются

---

## Сценарий 6: Массовые действия с объявлениями

**Цель:** Пользователь выполняет действия над несколькими объявлениями.

### Шаги:

1. **Главный экран** → Выбор объявлений через чекбоксы
2. **Появляется панель действий** внизу экрана
3. **Доступные действия:**
   - "Hide ads" — скрыть выбранные
   - "Delete ads" — удалить (с подтверждением)

### Для удаления:
1. Тап "Delete ads"
2. Модальное окно с предупреждением
3. Тап "Delete" для подтверждения
4. Toast об успехе

### Ожидаемый результат:
- Объявления скрыты/удалены
- Список обновлён
- Счётчики статусов обновлены

---

## Сценарий 7: Сортировка объявлений

**Цель:** Пользователь меняет порядок отображения объявлений.

### Доступные сортировки:

| Сортировка | Описание |
|------------|----------|
| Newest first | По дате (новые сверху) — default |
| Oldest first | По дате (старые сверху) |
| Price: Low to High | По цене (дешёвые сверху) |
| Price: High to Low | По цене (дорогие сверху) |
| Most viewed | По просмотрам (популярные сверху) |

### Шаги:

1. **Тап на "Sort"** справа от "Select all"
2. **Modal с опциями** сортировки
3. **Выбор опции** → Modal закрывается
4. **Список пересортирован**

---

## Сценарий 8: Отмена применённой промоции (Undo)

**Цель:** Пользователь отменяет только что применённую промоцию.

### Шаги:

1. **После применения промоции** → Snackbar с кнопкой "Undo"
2. **Тап "Undo"** в течение показа snackbar
3. **Промоция отменена**
4. **Snackbar** показывает "Promotion undone for N ads"

### Ограничения:
- Доступно только сразу после применения
- Snackbar виден ~4 секунды

### Ожидаемый результат:
- Промоция снята с объявлений
- Счётчик пакета восстановлен

---

## Бизнес-правила

### VIP и TOP взаимоисключающие
- Объявление может иметь **только одну** из промоций: VIP или TOP
- При применении VIP — TOP снимается автоматически
- При применении TOP — VIP снимается автоматически
- Update можно применять независимо

### Совпадение категорий
- Пакет можно применить только к объявлениям из **той же категории**
- Пакет "Motors ‣ Cars" → только для объявлений в категории Motors

### Лимиты пакета
- Нельзя применить больше объявлений, чем осталось в пакете
- Прогресс-бар показывает текущее использование
- При достижении лимита — предупреждение

### Статусы объявлений
- **Промоция применяется только к active объявлениям**
- Pending, hidden, rejected, deleting — недоступны для промоции

---

## Данные прототипа

### Пакеты (mockPackages)
| Пакет | Тип | Категория | Лимит | Срок |
|-------|-----|-----------|-------|------|
| VIP на 5 дней | vip | motors | 5 | 31 января |
| TOP на 5 дней | top | motors/rentals | 5 | 17 июля |
| VIP на 7 дней | vip | property | 3 | 25 марта |

### Баланс кошелька
- €25.00

### Цены промоций
| Тип | Цена |
|-----|------|
| VIP | €2.50 |
| TOP | €1.50 |
| Update | €0.50 |

### Статистика объявлений
- Всего: 41
- Опубликованные (active): 33
- На проверке (pending): 4
- Скрытые (hidden): 3
- Отклонённые (rejected): 1
- На удаление (deleting): 1

---

## Навигация

```
screen-my-listings (главный)
    ├── [синяя кнопка ↑] → screen-select-promotion
    ├── [карточка пакета] → screen-package-apply
    ├── [карточка рекомендации] → Bottom Sheet
    └── [иконка фильтров] → filters-modal

screen-select-promotion
    ├── [Quick scenario] → screen-package-apply (с предвыбором)
    ├── [Package card] → screen-package-apply
    ├── [VIP/TOP card] → screen-wallet-apply
    └── [← назад] → screen-my-listings

screen-package-apply
    ├── [Apply button] → confirm-modal → screen-success
    └── [← назад] → screen-select-promotion

screen-wallet-apply
    ├── [Apply button] → confirm-modal → screen-success
    └── [← назад] → screen-select-promotion

screen-success
    └── [любое действие] → screen-my-listings
```

---

## Известные ограничения прототипа

1. **Данные не сохраняются** — при перезагрузке всё сбрасывается
2. **Нет реальной оплаты** — баланс кошелька не уменьшается
3. **Пакеты статичные** — срок действия не истекает
4. **Нет анимаций переходов** между экранами
5. **Мок-изображения** — используются placeholder картинки

---

## Версия

- Текущая версия: v30
- Последнее обновление: добавлены статусы со счётчиками
